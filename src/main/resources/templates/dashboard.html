<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>Online Banking â€“ Dashboard</title>
    <link rel="stylesheet" th:href="@{/style.css}">
</head>
<body class="page">
<div class="topbar">
    <div>ðŸ‘¤ <b th:text="${me}"></b></div>
    <form method="post" action="/logout"><button>Logout</button></form>
</div>

<div class="container">
    <p th:if="${msg}" class="msg" th:text="${msg}"></p>
    <p th:if="${err}" class="err" th:text="${err}"></p>

    <section class="card">
        <h2>Your accounts</h2>
        <table class="tbl">
            <thead><tr><th>Number</th><th>Type</th><th>Currency</th><th>Balance</th></tr></thead>
            <tbody>
            <tr th:each="a : ${accounts}">
                <td th:text="${a.accountNumber}"></td>
                <td th:text="${a.type}"></td>
                <td th:text="${a.currency}"></td>
                <td th:text="${#numbers.formatDecimal(a.balance, 1, 'COMMA', 2, 'POINT')}"></td>
            </tr>
            <tr th:if="${#lists.isEmpty(accounts)}"><td colspan="4">No accounts yet.</td></tr>
            </tbody>
        </table>
    </section>

    <div class="grid-3">
        <!-- Create account -->
        <form method="post" action="/accounts/create" class="box">
            <h3>Create account</h3>
            <label>Type
                <select name="type">
                    <option>CHECKING</option>
                    <option>SAVINGS</option>
                </select>
            </label>
            <label>Currency <input name="currency" value="USD"></label>
            <button>Create</button>
        </form>

        <!-- Deposit -->
        <form method="post" action="/accounts/deposit" class="box">
            <h3>Deposit</h3>
            <label>Account
                <select name="accountNumber" required>
                    <option th:each="a : ${accounts}" th:value="${a.accountNumber}"
                            th:text="${a.accountNumber + ' (' + a.type + ')'}"></option>
                </select>
            </label>
            <label>Amount <input name="amount" type="number" step="0.01" min="0.01" required></label>
            <button>Deposit</button>
        </form>

        <!-- Withdraw -->
        <form method="post" action="/accounts/withdraw" class="box">
            <h3>Withdraw</h3>
            <label>Account
                <select name="accountNumber" required>
                    <option th:each="a : ${accounts}" th:value="${a.accountNumber}"
                            th:text="${a.accountNumber + ' (' + a.type + ')'}"></option>
                </select>
            </label>
            <label>Amount <input name="amount" type="number" step="0.01" min="0.01" required></label>
            <button>Withdraw</button>
        </form>
    </div>

    <!-- Transfer -->
    <form method="post" action="/accounts/transfer" class="box">
        <h3>Transfer</h3>
        <div class="grid-3">
            <label>From
                <select name="from" required>
                    <option th:each="a : ${accounts}" th:value="${a.accountNumber}"
                            th:text="${a.accountNumber + ' (' + a.type + ')'}"></option>
                </select>
            </label>
            <label>To
                <select name="to" required>
                    <option th:each="a : ${accounts}" th:value="${a.accountNumber}"
                            th:text="${a.accountNumber + ' (' + a.type + ')'}"></option>
                </select>
            </label>
            <label>Amount <input name="amount" type="number" step="0.01" min="0.01" required></label>
        </div>
        <button>Transfer</button>
    </form>
</div>
</body>
</html>
